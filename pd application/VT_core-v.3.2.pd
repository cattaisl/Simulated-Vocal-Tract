#N canvas -8 -8 1280 637 10;
#X obj 653 72 noise~;
#X obj 652 94 bp~ 1000 0.5;
#X obj 743 73 noise~;
#X obj 744 92 bp~ 500 0.5;
#X obj 686 152 audioSys;
#X obj 490 226 output~;
#N canvas 0 50 450 250 (subpatch) 0;
#X array Tract 43 float 0;
#X coords 0 3 43 0 250 200 1 0 0;
#X restore 36 330 graph;
#X obj 295 325 cnv 15 110 220 empty empty tongue_control 5 8 0 12 -204786
-260097 0;
#X obj 322 372 vsl 15 128 55 160 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X obj 357 373 vsl 15 128 60 165 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 1;
#X text 320 348 x;
#X text 354 347 y;
#X floatatom 322 523 5 0 0 0 - - -;
#X floatatom 357 523 5 0 0 0 - - -;
#X obj 159 625 visualizeXY;
#X msg 222 655 set;
#X msg 241 680 addsemi;
#X obj 211 687 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 232 707 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 159 655 add2 \$1;
#X obj 204 583 list;
#X obj 256 590 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 543 676 loadbang;
#X obj 743 120 tabreceive~ Tract;
#X obj 684 185 receive pa;
#X msg 528 582 pitch \$1;
#X obj 596 583 send pa;
#X obj 892 470 textfile;
#X msg 808 425 rewind;
#X msg 809 468 clear;
#X msg 892 393 read \$1 cr;
#X obj 984 427 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 807 394 openpanel;
#X msg 1012 427 stop;
#X msg 893 596 set;
#X msg 912 621 addsemi;
#X obj 929 596 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 971 625 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 893 667 \; Tract 0 \;;
#X obj 905 564 loadbang;
#X msg 1002 562 add \$8 \$9 \$10 \$11 \$12 \$13 \$14 \$15 \$16 \$17
\$18 \$19 \$20 \$21 \$22 \$23 \$24 \$25 \$26 \$27 \$28 \$29 \$30 \$31
\$32 \$33 \$34 \$35 \$36 \$37 \$38 \$39 \$40 \$41 \$42 \$43 \$44 \$45
\$46 \$47 \$48 \$49 \$50 \$51, f 45;
#X obj 965 667 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 1002 681 add;
#X obj 1003 766 bang;
#X msg 1050 767 set add;
#X obj 814 560 send pa;
#X obj 102 693 loadbang;
#X msg 265 703 add2 Tract 0;
#X msg 935 645 add2 Tract 0;
#X obj 984 455 metro 2000;
#X msg 814 523 pitch \$1 \, loudness \$2 \, fricative \$3 \, nasal
\$4 \, autoWobble \$5 \, alwaysVoiced \$6, f 40;
#X obj 456 581 testPitch;
#X msg 543 726 \; Tract resize 43 \; Tract bounds 0 3 43 0 \; Tract
xlabel 0 4 8 12 16 20 24 28 32 36 40 43 \; Tract ylabel 0 0.3 0.6 0.9
1.2 1.5 1.8 2.1 2.4 2.7 3 \;;
#X text 257 628 Convert tonge coordinate to diameter array;
#X obj 418 324 cnv 15 157 100 empty empty empty 0 20 0 10 -262130 -1
0;
#X text 495 376 Process File;
#X text 430 377 Get File;
#X obj 442 395 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 517 394 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 418 442 cnv 15 157 100 empty empty empty 0 20 0 10 -261682 -1
0;
#X obj 442 514 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 515 512 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X text 420 499 Get PFS File;
#X text 499 498 Process File;
#X text 842 133 receive changed diameter array;
#X text 756 186 receive changed loudness/fricative/autoWobble /alwaysVoiced/nasal
;
#X text 601 700 initialize the Tract graph;
#X obj 53 298 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X text 422 329 Read and proccess a self;
#X text 422 345 defined file;
#X text 78 294 click to store;
#X text 421 443 Read and process a PFS;
#X text 422 456 file;
#X text 76 306 Tract array;
#X obj 19 88 cnv 15 260 200 empty empty Audio_parameter_control 5 8
0 12 -228856 -260097 0;
#X msg 5 23 loudness \$1;
#X msg 90 23 pitch \$1;
#X obj 5 54 send pa;
#X obj 90 54 send pa;
#X obj 38 130 vsl 15 128 0 1 0 0 empty empty loudness -14 -14 0 10
-262144 -1 -1 0 1;
#X obj 85 130 vsl 15 128 90 280 0 0 empty empty pitch -5 -14 0 10 -262144
-1 -1 0 1;
#X floatatom 38 266 5 0 0 0 - - -;
#X floatatom 85 267 5 0 0 0 - - -;
#X text 202 113 fricative;
#X msg 258 22 fricative \$1;
#X text 200 195 alwaysVoiced;
#X msg 459 20 alwaysVoiced \$1;
#X text 202 156 autoWobble;
#X msg 356 21 autoWobble \$1;
#X obj 459 51 send pa;
#X obj 356 52 send pa;
#X obj 258 53 send pa;
#X obj 572 51 send pa;
#X text 202 237 nasal;
#X msg 572 20 nasal \$1;
#X text 120 108 tract length;
#X floatatom 141 266 5 0 0 0 - - -;
#X obj 160 54 send pa;
#X msg 160 23 tractLength \$1;
#X obj 160 0 int;
#X text 302 237 not be used if tractLength;
#X text 301 250 is not 44;
#X obj 206 135 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 205 178 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 205 217 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 206 256 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 139 130 vsl 15 128 36 44 0 0 empty empty empty 0 -9 0 10 -262144
-1 -1 0 0;
#X obj 788 331 textfile;
#X msg 743 285 print;
#X msg 788 286 add2 \$1;
#X msg 852 286 write tract_array.txt;
#X obj 648 232 until;
#X obj 183 301 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 158 724 \; Tract 0 0.6 0.6 0.6 0.6 0.6 0.6 0.6 1.1 1.1 1.1 1.6105
1.5908 1.5618 1.53129 1.5 1.46871 1.4382 1.4092 1.38244 1.35858 1.3382
1.3218 1.30979 1.30246 1.3 1.30246 1.30979 1.3218 1.3382 1.35858 1.38244
1.4092 1.4382 1.46871 1.5 1.53129 1.5618 1.58535 1.59405 1.5 1.5 1.5
1.5 1.5;
#X obj 296 89 cnv 15 280 90 empty empty VocalTract 45 20 0 30 -232576
-260097 0;
#X text 310 131 A speech sythesiser with simulated vocal;
#X text 311 149 tract and real-time parameter control.;
#X text 201 297 click to write;
#X text 202 308 file;
#X obj 788 254 tabread Tract;
#X obj 648 259 f;
#X obj 686 259 + 1;
#X obj 727 258 sel 0;
#X obj 686 285 mod 44;
#X text 302 224 NOTE: tongue control can;
#X msg 727 309 add \;;
#X msg 852 310 saved as tract_array.txt;
#X text 702 228 loop the index of the array;
#X obj 853 336 print success;
#X text 1022 308 print successfully saved message;
#X text 885 253 write to a file;
#X text 813 70 relate to turblence noise;
#X text 929 496 read audio parameters;
#X text 1098 539 read tract array;
#X text 637 633 initialize the message when finish a line.;
#X text 254 657 initialize the message when finish a line.;
#X text 6 374 D;
#X text 5 391 a;
#X text 5 400 m;
#X text 6 384 i;
#X text 5 408 e;
#X text 5 416 t;
#X text 5 424 e;
#X text 5 434 r;
#X text -3 450 (cm);
#X msg 1427 417 set;
#X msg 1446 442 addsemi;
#X obj 1416 449 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1437 469 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 1364 417 add2 \$1;
#X msg 1470 465 add2 Tract 0;
#X text 1462 390 Convert tonge coordinate to diameter array;
#X msg 1363 486 \; Tract 0 0.554287 0.609263 0.641764 0.729153 1.0729
1.42313 1.71428 1.75434 1.7308 1.88698 2.03582 2.15587 2.3067 2.35821
2.38086 2.42798 2.44835 2.45075 2.41365 2.30592 2.12837 1.99498 1.79489
1.5851 1.34151 1.06811 0.862678 0.7461 0.697685 0.625733 0.620769 0.655531
0.796732 0.934883 1.07471 1.27949 1.42653 1.44617 1.38886 1.47016 1.45617
1.36657 1.20885;
#X text 1459 419 initialize the message when finish a line.;
#X obj 1364 387 FormantTransfer;
#X text 1404 195 F1;
#X text 1466 198 F2;
#X obj 1444 218 - 500;
#X obj 1375 216 - 200;
#X obj 1375 261 / 88.9;
#X obj 1375 297 - 5;
#X obj 1444 262 / 400;
#X floatatom 1375 325 5 0 0 0 - - -;
#X floatatom 1444 328 5 0 0 0 - - -;
#X obj 1398 356 list;
#X obj 1486 357 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 1444 299 - 3;
#X text 5 541 Section number i(represent distance from glottis);
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 2 0 3 0;
#X connect 3 0 4 1;
#X connect 4 0 5 0;
#X connect 4 0 5 1;
#X connect 8 0 12 0;
#X connect 9 0 13 0;
#X connect 12 0 20 0;
#X connect 13 0 20 1;
#X connect 13 0 21 0;
#X connect 14 0 19 0;
#X connect 14 1 15 0;
#X connect 14 2 113 0;
#X connect 15 0 113 0;
#X connect 15 0 17 0;
#X connect 16 0 113 0;
#X connect 16 0 18 0;
#X connect 17 0 16 0;
#X connect 18 0 47 0;
#X connect 19 0 113 0;
#X connect 20 0 14 1;
#X connect 21 0 12 0;
#X connect 22 0 52 0;
#X connect 23 0 4 2;
#X connect 24 0 4 0;
#X connect 25 0 26 0;
#X connect 27 0 50 0;
#X connect 27 0 34 0;
#X connect 27 0 40 0;
#X connect 28 0 27 0;
#X connect 28 0 31 0;
#X connect 29 0 27 0;
#X connect 30 0 27 0;
#X connect 31 0 49 0;
#X connect 32 0 30 0;
#X connect 33 0 49 0;
#X connect 34 0 38 0;
#X connect 34 0 36 0;
#X connect 35 0 38 0;
#X connect 35 0 37 0;
#X connect 36 0 35 0;
#X connect 37 0 48 0;
#X connect 39 0 34 0;
#X connect 40 0 42 0;
#X connect 41 0 42 0;
#X connect 42 0 38 0;
#X connect 42 0 43 0;
#X connect 43 0 44 0;
#X connect 43 0 38 0;
#X connect 44 0 42 0;
#X connect 46 0 113 0;
#X connect 47 0 113 0;
#X connect 48 0 38 0;
#X connect 48 0 41 0;
#X connect 49 0 27 0;
#X connect 50 0 45 0;
#X connect 51 0 158 0;
#X connect 51 1 157 0;
#X connect 51 2 25 0;
#X connect 57 0 29 0;
#X connect 57 0 32 0;
#X connect 58 0 28 0;
#X connect 60 0 51 0;
#X connect 61 0 51 1;
#X connect 67 0 111 0;
#X connect 75 0 77 0;
#X connect 76 0 78 0;
#X connect 79 0 81 0;
#X connect 80 0 82 0;
#X connect 81 0 75 0;
#X connect 82 0 76 0;
#X connect 84 0 91 0;
#X connect 86 0 89 0;
#X connect 88 0 90 0;
#X connect 94 0 92 0;
#X connect 96 0 99 0;
#X connect 98 0 97 0;
#X connect 99 0 98 0;
#X connect 102 0 84 0;
#X connect 103 0 88 0;
#X connect 104 0 86 0;
#X connect 105 0 94 0;
#X connect 106 0 96 0;
#X connect 108 0 107 0;
#X connect 109 0 107 0;
#X connect 110 0 107 0;
#X connect 110 0 126 0;
#X connect 111 0 120 0;
#X connect 112 0 110 0;
#X connect 119 0 109 0;
#X connect 120 0 121 0;
#X connect 121 0 123 0;
#X connect 122 0 111 1;
#X connect 122 0 125 0;
#X connect 122 1 119 0;
#X connect 123 0 120 1;
#X connect 123 0 122 0;
#X connect 125 0 107 0;
#X connect 126 0 128 0;
#X connect 145 0 152 0;
#X connect 145 0 147 0;
#X connect 146 0 152 0;
#X connect 146 0 148 0;
#X connect 147 0 146 0;
#X connect 148 0 150 0;
#X connect 149 0 152 0;
#X connect 150 0 152 0;
#X connect 154 0 149 0;
#X connect 154 1 145 0;
#X connect 154 2 152 0;
#X connect 157 0 161 0;
#X connect 158 0 159 0;
#X connect 159 0 160 0;
#X connect 160 0 162 0;
#X connect 161 0 166 0;
#X connect 162 0 164 0;
#X connect 163 0 165 0;
#X connect 163 0 164 1;
#X connect 164 0 154 1;
#X connect 165 0 162 0;
#X connect 166 0 163 0;
#X coords 0 -1 1 1 585 480 2 0 80;
